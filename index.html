<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°ÙƒØ§Ø¡:Ø®Ø§Ù„Ø¯ & ÙŠØ§Ø³Ø±</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
    /* ğŸ¨ Ù…ØªØºÙŠØ±Ø§Øª CSS */
    :root {
        --primary-color: #3a86ff;
        --secondary-color: #00f2fe;
        --background-dark: #0f1e3c;
        --background-medium: #1a3a6a;
        --card-background: rgba(25,40,65,0.95);
        --text-color: #e0e0e0;
        --correct-color: #28b464;
        --wrong-color: #dc5050;
        --highlight-color: #ff9a3c;
    }

    /* ğŸ§± Ø£Ø³Ø§Ø³ÙŠØ§Øª ÙˆØªØµÙ…ÙŠÙ… Ø¹Ø§Ù… */
    * {margin:0;padding:0;box-sizing:border-box;font-family:'Cairo', sans-serif;}
    
    /* ğŸ”„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© (GIF) */
    body {
        /* Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© (ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­ Ø§Ù„Ø°ÙŠ ÙŠØ¹Ù…Ù„ ÙƒØ®Ù„ÙÙŠØ©) */
        background-image: url('https://raw.githubusercontent.com/ya8796202-dotcom/ALGAZ/main/b1774431-2537-48e1-b0f7-33202244dcea(1).gif');
        background-size: cover; /* Ù„Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed; /* Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø®Ù„ÙÙŠØ© */
        background-color: #0f1e3c; /* Ù„ÙˆÙ† Ø§Ø­ØªÙŠØ§Ø·ÙŠ */

        color: var(--text-color); 
        min-height:100vh; 
        display:flex; 
        justify-content:center; 
        align-items:center; 
        padding:20px;
        perspective: 1000px;
        overflow: hidden; 
    }
    .container {
        width:100%; 
        max-width:900px; 
        background: var(--card-background); 
        border-radius:25px; 
        box-shadow:0 15px 40px rgba(0,0,0,0.8); 
        overflow:hidden; 
        position:relative; 
        padding:40px;
        transform: scale(0.95);
        animation: scaleIn 0.5s forwards;
        z-index: 10;
    }
    @keyframes scaleIn {to {transform: scale(1);}}
    
    .game-content {position:relative; z-index:1;}

    /* ğŸ’ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
    h1 {
        text-align:center; 
        font-size:3rem; 
        margin-bottom:30px; 
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color)); 
        -webkit-background-clip:text; 
        -webkit-text-fill-color:transparent; 
        text-shadow:0 3px 7px rgba(0,0,0,0.4);
        letter-spacing: 1px;
    }

    /* ğŸ® Ø§Ù„Ø´Ø§Ø´Ø§Øª ÙˆØ§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ÙŠØ© */
    .screen {
        display:none; 
        animation: slideIn 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .active {display:block;}
    @keyframes slideIn {
        from{opacity:0; transform:translateY(30px);} 
        to{opacity:1; transform:translateY(0);}
    }

    /* ğŸ“œ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª */
    .instructions {text-align:center; margin:30px 0; line-height:1.8; font-size:1.2rem;}
    .instructions p {
        margin:15px 0; 
        padding:15px; 
        background: rgba(40,70,120,0.4); 
        border-radius:15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    /* ğŸ”˜ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn {
        display:block; 
        width:280px; 
        margin:15px auto;
        padding:18px; 
        background: linear-gradient(to right, var(--primary-color), #4facfe); 
        color:white; 
        border:none; 
        border-radius:50px; 
        font-size:1.3rem; 
        font-weight:bold; 
        cursor:pointer; 
        transition:all 0.3s ease; 
        box-shadow:0 7px 20px rgba(0,0,0,0.3);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        text-decoration: none;
        text-align: center;
    }
    .btn:hover {
        transform:translateY(-5px); 
        box-shadow:0 12px 25px rgba(0,0,0,0.5); 
        background:linear-gradient(to right,#4facfe, var(--primary-color));
    }
    .btn:active {transform:translateY(-1px);}

    /* ØªØ®ØµÙŠØµ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
    .options.category-selection {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 30px;
    }
    .category-btn {
        width: 100%; 
        max-width: 350px;
        margin: 0 auto;
        background: linear-gradient(to right, #2ecc71, #27ae60); 
    }
    .category-btn[data-category="math"] {background: linear-gradient(to right, #e67e22, #d35400);}
    .category-btn[data-category="visual"] {background: linear-gradient(to right, #9b59b6, #8e44ad);}
    .category-btn[data-category="all"] {
        background: linear-gradient(to right, #e74c3c, #f39c12); 
        box-shadow:0 7px 25px rgba(231, 76, 60, 0.5);
    }
    
    /* Ø²Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
    .visit-btn {
        width: 90%;
        max-width: 350px;
        margin: 20px auto 10px;
        font-size: 1.1rem;
        padding: 15px;
        background: linear-gradient(to right, #1abc9c, #16a085);
        box-shadow: 0 5px 15px rgba(26, 188, 156, 0.5);
    }


    /* ğŸ“Š Ø±Ø£Ø³ Ø§Ù„Ù„Ø¹Ø¨Ø© */
    .game-header {
        display:flex; 
        justify-content:space-between; 
        margin-bottom:30px; 
        padding:15px 25px; 
        background: rgba(30,50,90,0.7); 
        border-radius:15px; 
        box-shadow:0 5px 15px rgba(0,0,0,0.3);
    }
    .score, .timer {font-size:1.5rem; font-weight:bold; display:flex; align-items:center;}
    .timer {color:var(--highlight-color);}
    .score span, .timer span {margin-right: 5px;}

    /* â“ Ø§Ù„Ø³Ø¤Ø§Ù„ */
    .question {
        font-size:1.6rem; 
        margin:30px 0; 
        padding:25px; 
        background: rgba(40,70,120,0.5); 
        border-radius:15px; 
        line-height:1.6; 
        text-align:center;
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        
        /* ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ø³Ø¤Ø§Ù„ - Flip In */
        transform: rotateX(-90deg);
        opacity: 0;
        animation: flipIn 0.6s ease forwards;
        transform-origin: bottom;
    }
    @keyframes flipIn {to {transform: rotateX(0); opacity: 1;}}

    /* ğŸ“‹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª */
    .options {
        display:grid; 
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap:20px; 
        margin:30px 0;
    }
    .option {
        padding:20px; 
        background: rgba(50,90,150,0.6); 
        border:3px solid #4682b4; 
        border-radius:15px; 
        cursor:pointer; 
        transition:all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
        font-size:1.2rem;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .option:hover {
        background: rgba(60,110,180,0.8); 
        transform:translateY(-5px) scale(1.02); 
        box-shadow:0 10px 20px rgba(0,0,0,0.4);
    }
    .option.correct {
        background: var(--correct-color); 
        border-color: #28b464;
        animation: pulse 0.5s 3;
    }
    .option.wrong {
        background: var(--wrong-color); 
        border-color: #dc5050;
        animation: shake 0.5s;
    }
    @keyframes shake {
        0%, 100% {transform: translateX(0);}
        20%, 60% {transform: translateX(-5px);}
        40%, 80% {transform: translateX(5px);}
    }
    @keyframes pulse {
        0% {transform: scale(1);}
        50% {transform: scale(1.05);}
        100% {transform: scale(1);}
    }

    /* ğŸ’¬ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© (Toast) */
    .toast {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        padding: 15px 30px;
        border-radius: 10px;
        font-size: 1.2rem;
        font-weight: bold;
        color: white;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        z-index: 100;
    }
    .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
    .toast.correct-toast {background-color: var(--correct-color);}
    .toast.wrong-toast {background-color: var(--wrong-color);}

    /* â³ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
    .progress-bar {
        height:12px; 
        background: rgba(70,130,180,0.3); 
        border-radius:6px; 
        margin:20px 0; 
        overflow:hidden;
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
    }
    .progress {
        height:100%; 
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color)); 
        border-radius:6px; 
        width:0%; 
        transition:width 0.5s ease, background 1s ease;
    }
    /* ØªØ­Ø°ÙŠØ± Ø¹Ù†Ø¯ Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª */
    .progress.warning {background: linear-gradient(to right, var(--highlight-color), #ff6b6b);}

    /* ğŸ‰ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© */
    .end-title {
        text-align:center; 
        font-size:3rem; 
        margin:20px 0; 
        color:var(--highlight-color);
        text-shadow: 0 0 10px rgba(255,154,60,0.5);
    }
    .final-score {
        text-align:center; 
        font-size:2rem; 
        margin:30px 0;
        padding: 10px;
        background: rgba(40,70,120,0.4); 
        border-radius:12px; 
        font-weight: bold;
    }
    .performance {
        text-align:center; 
        font-size:1.5rem; 
        margin:30px 0; 
        padding:25px; 
        background: rgba(40,70,120,0.4); 
        border-radius:15px; 
        line-height:1.6;
    }
    .celebration {text-align:center; margin:30px 0; display:flex; justify-content:center; flex-wrap:wrap; min-height: 50px;}
    .firework {
        display:inline-block; 
        width:10px; 
        height:10px; 
        border-radius:50%; 
        margin:0 5px; 
        animation: firework 1.5s infinite;
        box-shadow: 0 0 5px rgba(255,255,255,0.7);
    }
    @keyframes firework {
        0% {transform:translateY(0); opacity:1; box-shadow: 0 0 5px currentColor;} 
        100% {transform:translateY(-50px) scale(0.5); opacity:0; box-shadow: none;}
    }

    /* ğŸ“± Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
    @media (max-width:768px){
        h1{font-size:2.5rem;} 
        .container{padding:20px;} 
        .question{font-size:1.4rem; min-height: 100px;} 
        .btn{width:90%; max-width: 300px;}
        .options {grid-template-columns: 1fr;}
        .category-btn {max-width: 100%;}
        .visit-btn {max-width: 100%;}
    }
    @media (max-width:480px){
        h1{font-size:2rem;} 
        .game-header{flex-direction:column; gap:10px; text-align:center;} 
        .question{font-size:1.2rem; padding:15px;} 
        .option{padding:15px; font-size:1rem;}
        .final-score {font-size: 1.5rem;}
    }
</style>
</head>
<body>
<div class="container">
    <div class="game-content">
        <h1>Ù„Ø¹Ø¨Ø© Ø®Ø§Ù„Ø¯ Ù…Ø®ØªØ§Ø± Ø§Ù„Ø°ÙƒÙŠÙ‡  ğŸ§ </h1>

        <div id="start-screen" class="screen active">
            <div class="instructions">
                <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… Ø§Ù†Ø§ Ø®Ø§Ù„Ø¯ Ø³Ø§Ø¹Ø¯Ù†ÙŠ ØµØ¯ÙŠÙ‚ÙŠ ÙŠØ§Ø³Ø± Ø§Ø­Ù…Ø¯ Ø­Ù…Ø¯ÙŠ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ø¨Ù‡**!</p>
                <p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø°ÙŠ ØªÙØ¶Ù„Ù‡ Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ:</p>
            </div>
            <div id="category-buttons" class="options category-selection">
                <button data-category="logic" class="btn category-btn">Ø§Ù„Ù…Ù†Ø·Ù‚ ÙˆØ§Ù„Ø£Ù„ØºØ§Ø² ğŸ’¡ (5 Ø£Ø³Ø¦Ù„Ø©)</button>
                <button data-category="math" class="btn category-btn">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„ØªØ³Ù„Ø³Ù„ â• (5 Ø£Ø³Ø¦Ù„Ø©)</button>
                <button data-category="visual" class="btn category-btn">Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø¨ØµØ±ÙŠØ© ğŸ‘ï¸ (3 Ø£Ø³Ø¦Ù„Ø©)</button>
                <button data-category="all" class="btn category-btn all-btn">ØªØ­Ø¯ÙŠ Ø´Ø§Ù…Ù„ (Ø§Ù„ÙƒÙ„) ğŸš€ (13 Ø³Ø¤Ø§Ù„)</button>
            </div>
            
            <a href="https://ya8796202-dotcom.github.io/yasser-ai-robotics/" target="_blank" class="btn visit-btn">
                Ø²ÙØ± Ù…ÙˆÙ‚Ø¹Ù†Ø§ ğŸŒ
            </a>

        </div>

        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="score">ğŸ† Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score-value">0</span></div>
                <div class="timer">â° Ø§Ù„ÙˆÙ‚Øª: <span id="timer-value">60</span> Ø«Ø§Ù†ÙŠØ©</div>
            </div>
            <div class="progress-bar"><div id="progress" class="progress"></div></div>
            <div id="question" class="question"></div>
            <div id="options" class="options"></div>
        </div>
<button id="installBtn" style="display:none;">ğŸ“² ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
<p id="installMsg" style="color: #0f0; margin-top: 10px;"></p>

        <div id="end-screen" class="screen">
            <h2 class="end-title">Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠ! ğŸ‰</h2>
            <div class="final-score">
                Ø­ØµÙŠÙ„ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: <span id="final-score">0</span> Ù†Ù‚Ø·Ø© Ù…Ù† Ø£ØµÙ„ <span id="total-score">0</span>
            </div>
            <div id="performance" class="performance"></div>
            <div class="celebration" id="celebration"></div>
            <button id="restart-btn" class="btn">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ”„</button>
        </div>
    </div>
</div>

<div id="toast-message" class="toast"></div>

<script>
// Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ù…Ù‚Ø³Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
const categories = {
    // ğŸ’¡ Ù‚Ø³Ù… Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© ÙˆØ§Ù„Ù„ØºÙˆÙŠØ© (5 Ø£Ø³Ø¦Ù„Ø©)
    logic: [
        {question:"Ø¥Ø°Ø§ ÙƒØ§Ù† 5 Ø±Ø¬Ø§Ù„ ÙŠØ­ØªØ§Ø¬ÙˆÙ† 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØµÙ†Ø¹ 5 ÙƒØ±Ø§Ø³ÙŠØŒ ÙÙƒÙ… Ø¯Ù‚ÙŠÙ‚Ø© ÙŠØ­ØªØ§Ø¬ 10 Ø±Ø¬Ø§Ù„ Ù„ØµÙ†Ø¹ 10 ÙƒØ±Ø§Ø³ÙŠØŸ", options:["5 Ø¯Ù‚Ø§Ø¦Ù‚","10 Ø¯Ù‚Ø§Ø¦Ù‚","15 Ø¯Ù‚Ø§Ø¦Ù‚","20 Ø¯Ù‚Ø§Ø¦Ù‚"], answer:0},
        {question:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙƒÙ„Ù…Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ ÙŠÙƒØ¨Ø±ØŸ", options:["Ø­ÙØ±Ø©","Ù†Ù‡Ø±","Ù‚Ù„Ù…","ÙƒØªØ§Ø¨"], answer:0},
        {question:"Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù„Ø§ ØªÙ†ØªÙ…ÙŠ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ØªÙØ§Ø­ØŒ Ù…ÙˆØ²ØŒ Ø¨Ø±ØªÙ‚Ø§Ù„ØŒ Ø¬Ø²Ø±ØŸ", options:["ØªÙØ§Ø­","Ù…ÙˆØ²","Ø¨Ø±ØªÙ‚Ø§Ù„","Ø¬Ø²Ø±"], answer:3},
        {question:"Ø£ÙŠ Ø­Ø±Ù ÙŠØªØ¨Ø¹ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© (Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹ÙƒØ³ÙŠ): ...ØŒ Ù†ØŒ Ù…ØŒ Ù„ØŒ ÙƒØŒ ...ØŸ", options:["ÙŠ","Ø¹","Øª","Ù‡Ù€"], answer:0},
        {question:"Ù…Ø§ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø®ØªÙ„Ù: Ù…Ø±Ø¨Ø¹ØŒ Ù…Ø«Ù„Ø«ØŒ Ø¯Ø§Ø¦Ø±Ø©ØŒ Ù…ÙƒØ¹Ø¨ØŸ", options:["Ù…Ø±Ø¨Ø¹","Ù…Ø«Ù„Ø«","Ø¯Ø§Ø¦Ø±Ø©","Ù…ÙƒØ¹Ø¨"], answer:3},
    ],
    // â• Ù‚Ø³Ù… Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø¹Ø¯Ø¯ÙŠ (5 Ø£Ø³Ø¦Ù„Ø©)
    math: [
        {question:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ ÙÙŠ Ø§Ù„ØªØ³Ù„Ø³Ù„: 1,1,2,3,5,8,13,...ØŸ", options:["18","21","23","25"], answer:1},
        {question:"Ø£Ø¨ Ø¹Ù…Ø±Ù‡ 45 Ø³Ù†Ø© ÙˆØ§Ø¨Ù†Ù‡ Ø¹Ù…Ø±Ù‡ 15 Ø³Ù†Ø©. Ø¨Ø¹Ø¯ ÙƒÙ… Ø³Ù†Ø© ÙŠØµØ¨Ø­ Ø¹Ù…Ø± Ø§Ù„Ø£Ø¨ Ø¶Ø¹Ù Ø¹Ù…Ø± Ø§Ù„Ø§Ø¨Ù†ØŸ", options:["10 Ø³Ù†ÙˆØ§Øª","15 Ø³Ù†ÙˆØ§Øª","20 Ø³Ù†ÙˆØ§Øª","25 Ø³Ù†ÙˆØ§Øª"], answer:1},
        {question:"Ù…Ø§ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙÙ‚ÙˆØ¯: 2,6,12,20,30,? (Ø§Ù„Ù†Ù…Ø·: +4, +6, +8, +10, +12)", options:["40","42","44","46"], answer:1},
        {question:"Ø¥Ø°Ø§ ÙƒØ§Ù† ğŸ + ğŸ = 10 Ùˆ ğŸ + ğŸŒ = 7. ÙÙƒÙ… ØªØ³Ø§ÙˆÙŠ ğŸŒØŸ", options:["2","3","4","5"], answer:1},
        {question:"Ø§Ù„Ø³Ø§Ø¹Ø© 3:15. ÙƒÙ… Ù‡ÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ØµØºØ±Ù‰ Ø¨ÙŠÙ† Ø¹Ù‚Ø±Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø§Øª ÙˆØ¹Ù‚Ø±Ø¨ Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚ØŸ", options:["7.5 Ø¯Ø±Ø¬Ø©","10 Ø¯Ø±Ø¬Ø§Øª","15 Ø¯Ø±Ø¬Ø©","20 Ø¯Ø±Ø¬Ø©"], answer:0},
    ],
    // ğŸ‘ï¸ Ù‚Ø³Ù… Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ø¨ØµØ±ÙŠØ© ÙˆØ£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø´ÙƒØ§Ù„ (3 Ø£Ø³Ø¦Ù„Ø©)
    visual: [
        {question:"Ù„ØºØ² Ø¨ØµØ±ÙŠ: Ø§Ø®ØªØ± Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø®ØªÙ„Ù: ğŸ”´ØŒ ğŸ”µØŒ ğŸŸ¢ØŒ ğŸŸ¡", options:["ğŸ”´","ğŸ”µ","ğŸŸ¢","ğŸŸ¡"], answer:3},
        {question:"Ù„ØºØ² Ø¨ØµØ±ÙŠ: Ø£ÙŠ Ø´ÙƒÙ„ Ù„Ø§ ÙŠÙ†ØªÙ…ÙŠØŸ â¬›ØŒ â¬œØŒ â¬œØŒ â¬›", options:["â¬›","â¬œ","â¬œ","â¬›"], answer:1},
        {question:"Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø°ÙŠ ÙŠÙƒÙ…Ù„ Ø§Ù„Ù†Ù…Ø·: Ù…Ø±Ø¨Ø¹ØŒ Ø¯Ø§Ø¦Ø±Ø©ØŒ Ù…Ø«Ù„Ø«ØŒ Ù…Ø±Ø¨Ø¹ØŒ Ø¯Ø§Ø¦Ø±Ø©ØŒ ...ØŸ", options:["Ø¯Ø§Ø¦Ø±Ø©","Ù…Ø±Ø¨Ø¹","Ù…Ø«Ù„Ø«","Ù†Ø¬Ù…Ø©"], answer:2},
    ]
};

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
let currentPuzzle=0, score=0, timeLeft=60, timer, gameActive=false;
let activePuzzles = [];

// Ø¹Ù†Ø§ØµØ± DOM
const startScreen=document.getElementById('start-screen'),
      gameScreen=document.getElementById('game-screen'),
      endScreen=document.getElementById('end-screen'),
      restartBtn=document.getElementById('restart-btn'),
      scoreValue=document.getElementById('score-value'),
      timerValue=document.getElementById('timer-value'),
      questionElement=document.getElementById('question'),
      optionsElement=document.getElementById('options'),
      finalScore=document.getElementById('final-score'),
      totalScore=document.getElementById('total-score'),
      performanceElement=document.getElementById('performance'),
      celebrationElement=document.getElementById('celebration'),
      progressBar=document.getElementById('progress'),
      toastMessage=document.getElementById('toast-message');

// Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
restartBtn.addEventListener('click', restartGame);

// Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
document.querySelectorAll('.category-btn').forEach(button => {
    button.addEventListener('click', (event) => {
        const category = event.target.dataset.category;
        startGame(category);
    });
});

// **ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©**
function showToast(message, isCorrect) {
    toastMessage.textContent = message;
    toastMessage.className = 'toast show';
    toastMessage.classList.add(isCorrect ? 'correct-toast' : 'wrong-toast');

    setTimeout(() => {
        toastMessage.classList.remove('show');
    }, 1500);
}

// Ø§Ù„Ø¨Ø¯Ø¡ (Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù‚Ø³Ù…)
function startGame(category){
    if (category === 'all') {
        // Ø¯Ù…Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„ØºØ§Ø² Ù…Ø¹Ù‹Ø§ ÙˆØ¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹ (13 Ù„ØºØ²)
        activePuzzles = [...categories.logic, ...categories.math, ...categories.visual].sort(() => Math.random() - 0.5);
    } else {
        // Ø§Ø®ØªÙŠØ§Ø± Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙ‚Ø·
        activePuzzles = categories[category];
    }
    
    startScreen.classList.remove('active');
    gameScreen.classList.add('active');
    currentPuzzle=0; score=0; timeLeft=60; gameActive=true;
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    totalScore.textContent = activePuzzles.length * 10;

    updateScore(); updateTimer(); loadPuzzle();
    progressBar.classList.remove('warning');
    timer=setInterval(updateTimer,1000);
}

// Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
function restartGame(){
    endScreen.classList.remove('active');
    startScreen.classList.add('active');
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
function updateTimer(){
    timeLeft--;
    timerValue.textContent=timeLeft;
    const progressPercent=((60-timeLeft)/60)*100;
    progressBar.style.width=progressPercent+'%';

    if (timeLeft <= 10 && timeLeft > 0) {
        // ØªØ­Ø°ÙŠØ± Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ¨Ù‚Ù‰ 10 Ø«ÙˆØ§Ù†ÙŠ
        progressBar.classList.add('warning');
    } else if (timeLeft > 10) {
        progressBar.classList.remove('warning');
    }

    if(timeLeft<=0){endGame();}
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·
function updateScore(){scoreValue.textContent=score;}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ²
function loadPuzzle(){
    if(currentPuzzle>=activePuzzles.length){endGame(); return;}
    const puzzle=activePuzzles[currentPuzzle];
    questionElement.textContent=puzzle.question;
    optionsElement.innerHTML=''; 
    
    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙˆØªÙØ¹ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ø³Ø¤Ø§Ù„
    questionElement.style.animation = 'none';
    questionElement.offsetHeight; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ DOM Ù„ØªÙ…ÙƒÙŠÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Animation
    questionElement.style.animation = null;

    puzzle.options.forEach((option,index)=>{
        const optionElement=document.createElement('div');
        optionElement.className='option';
        optionElement.textContent=option;
        optionElement.addEventListener('click',()=>checkAnswer(index, optionElement));
        optionsElement.appendChild(optionElement);
    });
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
function checkAnswer(selectedIndex, selectedElement){
    if(!gameActive) return;
    const puzzle=activePuzzles[currentPuzzle];
    const options=document.querySelectorAll('.option');
    options.forEach(option=>{option.style.pointerEvents='none';});

    if(selectedIndex===puzzle.answer){
        selectedElement.classList.add('correct');
        showToast('Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +10 Ù†Ù‚Ø§Ø·', true);
        score+=10; updateScore();
    } else {
        selectedElement.classList.add('wrong');
        options[puzzle.answer].classList.add('correct');
        showToast('Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!', false);
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØºØ² Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ 1.5 Ø«Ø§Ù†ÙŠØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ£Ø«ÙŠØ±
    setTimeout(()=>{
        currentPuzzle++; 
        currentPuzzle<activePuzzles.length && timeLeft>0 ? loadPuzzle():endGame();
    }, 1500);
}

// Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
function endGame(){
    gameActive=false; clearInterval(timer);
    gameScreen.classList.remove('active'); endScreen.classList.add('active');
    finalScore.textContent=score;
    
    let performanceText='';
    const maxScore = activePuzzles.length * 10;
    
    celebrationElement.innerHTML = ''; 

    if(score === maxScore){
        performanceText='Ù…Ø³ØªÙˆÙ‰ Ø¹Ø¨Ù‚Ø±ÙŠ! Ø£Ø¯Ø§Ø¡ Ù„Ø§ ÙŠØµØ¯Ù‚ØŒ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© âœ¨.'; 
        createFireworks();
    }
    else if(score>=maxScore * 0.8){
        performanceText='Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ù„Ø¯ÙŠÙƒ Ù…Ù‡Ø§Ø±Ø§Øª ØªÙÙƒÙŠØ± Ù…Ù†Ø·Ù‚ÙŠ Ù‚ÙˆÙŠØ© Ø¬Ø¯Ù‹Ø§.';
        createFireworks();
    }
    else if(score>=maxScore * 0.5){
        performanceText='Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ† Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø¨Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ±ÙƒÙŠØ² ÙˆØ§Ù„Ù…Ù…Ø§Ø±Ø³Ø©.';
    }
    else{
        performanceText='ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ Ù„Ø¯ÙŠÙƒØŒ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§! ğŸ’ª';
    }
    performanceElement.textContent=performanceText;
}

// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¤Ø«Ø±Ø§Øª Fireworks
function createFireworks(){
    for(let i=0;i<50;i++){
        const firework=document.createElement('div');
        firework.className='firework';
        firework.style.backgroundColor=getRandomColor();
        firework.style.animationDelay=Math.random()*1.5+'s';
        firework.style.left = Math.random() * 100 + '%';
        celebrationElement.appendChild(firework);
    }
}
function getRandomColor(){
    const colors=['#ff9a3c','#ff6b6b','#4ecdff','#6bff6b','#ff4cd9'];
    return colors[Math.floor(Math.random()*colors.length)];
}
</script>
</body>
</html>
